{% extends 'base.html' %}
{% block title %}Edit Profile · SkillSwap{% endblock %}
{% block content %}
<div class="container" style="max-width:940px;">
  <div class="card">
    <h1 class="text-xl font-semibold mb-4">Редактирование профиля</h1>
    <form method="post" enctype="multipart/form-data" class="form-grid">
      {% csrf_token %}
      <div class="form-group"><label>Полное имя</label>{{ form.full_name }}</div>
      <div class="form-group"><label>Университет</label>{{ form.university }}</div>
      <div class="form-group"><label>Аватар</label>{{ form.avatar }}</div>
      <div class="form-group">
        <img id="avatarPreview" src="{% if user.avatar %}{{ user.avatar.url }}{% endif %}" style="height:96px;width:96px;border-radius:999px;object-fit:cover;border:1px solid var(--outline);" alt="avatar preview" />
      </div>
      <div class="form-group" style="grid-column:1/-1"><label>Могу преподавать</label>{{ form.skills_can_teach }}</div>
      <div class="form-group" style="grid-column:1/-1"><label>Хочу изучить</label>{{ form.skills_to_learn }}</div>
      {% if form.errors %}
        <div class="form-group" style="grid-column:1/-1;color:#fca5a5;">{{ form.errors }}</div>
      {% endif %}
      <div class="form-actions" style="grid-column:1/-1;">
        <button class="btn btn-primary">Сохранить</button>
        <a href="{% url 'home' %}" class="btn btn-ghost">Отмена</a>
      </div>
    </form>
  </div>
  </div>
<script>
  const input = document.querySelector('input[type="file"][name="avatar"]');
  const preview = document.getElementById('avatarPreview');
  if (input) {
    input.addEventListener('change', () => {
      const [file] = input.files;
      if (file) preview.src = URL.createObjectURL(file);
    });
  }
</script>
{% endblock %}


