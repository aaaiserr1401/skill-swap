{% extends 'base.html' %}
{% block title %}{{ target.get_full_name|default:target.username }} · SkillSwap{% endblock %}
{% block content %}
<div class="container" style="max-width:860px;">
  <div class="card">
    <div style="display:flex;gap:1rem;align-items:center;flex-wrap:wrap;justify-content:space-between;">
      <div style="display:flex;gap:1rem;align-items:center;">
        <img src="{% if target.avatar %}{{ target.avatar.url }}{% endif %}" style="height:64px;width:64px;border-radius:999px;object-fit:cover;border:1px solid var(--outline);" alt="avatar" />
        <div>
          <h1 class="text-xl font-semibold">{{ target.get_full_name|default:target.username }}</h1>
          <p class="muted">Университет: {{ target.university|default:"—" }}</p>
        </div>
      </div>
      {% if request.user != target %}
      <div class="card" style="min-width:300px;">
        <h3 class="font-semibold mb-2">Отправить запрос</h3>
        <form method="post" action="{% url 'accounts:send_request' target.id %}" class="form-grid">
          {% csrf_token %}
          <div class="form-group"><label>Навык</label>{{ form.skill }}</div>
          <div class="form-group" style="grid-column:1/-1;"><label>Сообщение</label>{{ form.message }}</div>
          <p class="muted" style="grid-column:1/-1;">Цена: <strong style="color:#fff">5</strong> баллов</p>
          {% if form.errors %}<div class="muted" style="color:#fca5a5;grid-column:1/-1;">{{ form.errors }}</div>{% endif %}
          <div class="form-actions" style="grid-column:1/-1;">
            <button class="btn btn-primary">Отправить</button>
          </div>
        </form>
      </div>
      {% endif %}
    </div>
  </div>
</div>
{% endblock %}


